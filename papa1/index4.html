<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∏—Ç–∞–π—Å–∫–∏–π –ø–æ–∫–µ—Ä (–ß–µ–ª–æ–≤–µ–∫ vs –ë–æ—Ç)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        .game-container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .player-area {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .player-name {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 18px;
        }
        .hand {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
            min-height: 100px;
        }
        .card {
            width: 60px;
            height: 90px;
            background-color: white;
            border: 1px solid #999;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            position: relative;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        .card.selected {
            border: 2px solid red;
            transform: translateY(-10px);
        }
        .card.hearts, .card.diamonds {
            color: red;
        }
        .card.spades, .card.clubs {
            color: black;
        }
        .card-back {
            background-color: #3366cc;
            color: white;
            font-size: 14px;
        }
        .fields {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .field {
            width: 30%;
            min-height: 150px;
            border: 1px dashed #999;
            border-radius: 5px;
            padding: 10px;
            background-color: #f5f5f5;
        }
        .field-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 0 10px;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background-color: #45a049;
        }
        .scoreboard {
            margin-top: 20px;
            border-top: 1px solid #ddd;
            padding-top: 20px;
        }
        .score-table {
            width: 100%;
            border-collapse: collapse;
        }
        .score-table th, .score-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .score-table th {
            background-color: #f2f2f2;
        }
        .message {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            min-height: 20px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>–ö–∏—Ç–∞–π—Å–∫–∏–π –ø–æ–∫–µ—Ä (–ß–µ–ª–æ–≤–µ–∫ vs –ë–æ—Ç)</h1>
        
        <div class="message" id="message">–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—É—é –∏–≥—Ä—É</div>
        
        <div class="controls">
            <button id="newGameBtn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button id="arrangeBtn" disabled>–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ä—Ç—ã</button>
            <button id="playBtn" disabled>–°–¥–µ–ª–∞—Ç—å —Ö–æ–¥</button>
        </div>
        
        <div class="player-area">
            <div class="player-name">–ë–æ—Ç</div>
            <div class="hand" id="botHand"></div>
            <div class="fields">
                <div class="field" id="botTop">
                    <div class="field-title">–í–µ—Ä—Ö (5 –∫–∞—Ä—Ç)</div>
                </div>
                <div class="field" id="botMiddle">
                    <div class="field-title">–°–µ—Ä–µ–¥–∏–Ω–∞ (5 –∫–∞—Ä—Ç)</div>
                </div>
                <div class="field" id="botBottom">
                    <div class="field-title">–ù–∏–∑ (3 –∫–∞—Ä—Ç—ã)</div>
                </div>
            </div>
        </div>
        
        <div class="player-area">
            <div class="player-name">–í—ã</div>
            <div class="hand" id="playerHand"></div>
            <div class="fields">
                <div class="field" id="playerTop">
                    <div class="field-title">–í–µ—Ä—Ö (5 –∫–∞—Ä—Ç)</div>
                </div>
                <div class="field" id="playerMiddle">
                    <div class="field-title">–°–µ—Ä–µ–¥–∏–Ω–∞ (5 –∫–∞—Ä—Ç)</div>
                </div>
                <div class="field" id="playerBottom">
                    <div class="field-title">–ù–∏–∑ (3 –∫–∞—Ä—Ç—ã)</div>
                </div>
            </div>
        </div>
        
        <div class="scoreboard">
            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
            <table class="score-table">
                <tr>
                    <th>–†–∞—É–Ω–¥</th>
                    <th>–í—ã</th>
                    <th>–ë–æ—Ç</th>
                </tr>
                <tbody id="scoreTable">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let deck = [];
        let playerHand = [];
        let botHand = [];
        let playerFields = { top: [], middle: [], bottom: [] };
        let botFields = { top: [], middle: [], bottom: [] };
        let currentRound = 0;
        let scores = [];
        let selectedCards = [];
        let currentField = null;

        // –ú–∞—Å—Ç–∏ –∫–∞—Ä—Ç
        const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
        const suitSymbols = { 'hearts': '‚ô•', 'diamonds': '‚ô¶', 'clubs': '‚ô£', 'spades': '‚ô†' };
        const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const playerHandEl = document.getElementById('playerHand');
        const botHandEl = document.getElementById('botHand');
        const playerTopEl = document.getElementById('playerTop');
        const playerMiddleEl = document.getElementById('playerMiddle');
        const playerBottomEl = document.getElementById('playerBottom');
        const botTopEl = document.getElementById('botTop');
        const botMiddleEl = document.getElementById('botMiddle');
        const botBottomEl = document.getElementById('botBottom');
        const newGameBtn = document.getElementById('newGameBtn');
        const arrangeBtn = document.getElementById('arrangeBtn');
        const playBtn = document.getElementById('playBtn');
        const messageEl = document.getElementById('message');
        const scoreTableEl = document.getElementById('scoreTable');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã
        function newGame() {
            // –°–æ–∑–¥–∞–µ–º –∫–æ–ª–æ–¥—É
            deck = [];
            for (let suit of suits) {
                for (let rank of ranks) {
                    deck.push({ suit, rank });
                }
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∫–æ–ª–æ–¥—É
            shuffleDeck();
            
            // –†–∞–∑–¥–∞–µ–º –∫–∞—Ä—Ç—ã
            playerHand = deck.slice(0, 13);
            botHand = deck.slice(13, 26);
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ä—Ç—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
            sortHand(playerHand);
            sortHand(botHand);
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            playerFields = { top: [], middle: [], bottom: [] };
            botFields = { top: [], middle: [], bottom: [] };
            selectedCards = [];
            currentField = null;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateHands();
            updateFields();
            updateControls();
            
            currentRound++;
            messageEl.textContent = `–†–∞—É–Ω–¥ ${currentRound}. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—ã –¥–ª—è –≤–µ—Ä—Ö–Ω–µ–≥–æ, —Å—Ä–µ–¥–Ω–µ–≥–æ –∏–ª–∏ –Ω–∏–∂–Ω–µ–≥–æ –ø–æ–ª—è.`;
        }

        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã
        function shuffleDeck() {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç –≤ —Ä—É–∫–µ
        function sortHand(hand) {
            hand.sort((a, b) => {
                const suitOrder = suits.indexOf(a.suit) - suits.indexOf(b.suit);
                if (suitOrder !== 0) return suitOrder;
                return ranks.indexOf(a.rank) - ranks.indexOf(b.rank);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç –≤ —Ä—É–∫–µ
        function updateHands() {
            // –ö–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞
            playerHandEl.innerHTML = '';
            playerHand.forEach((card, index) => {
                const cardEl = createCardElement(card, index, true);
                playerHandEl.appendChild(cardEl);
            });
            
            // –ö–∞—Ä—Ç—ã –±–æ—Ç–∞ (—Ä—É–±–∞—à–∫–æ–π –≤–≤–µ—Ä—Ö)
            botHandEl.innerHTML = '';
            botHand.forEach(() => {
                const cardEl = document.createElement('div');
                cardEl.className = 'card card-back';
                cardEl.textContent = '?';
                botHandEl.appendChild(cardEl);
            });
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç—ã
        function createCardElement(card, index, clickable) {
            const cardEl = document.createElement('div');
            cardEl.className = `card ${card.suit}`;
            cardEl.textContent = `${card.rank}${suitSymbols[card.suit]}`;
            cardEl.dataset.index = index;
            
            if (clickable) {
                cardEl.addEventListener('click', () => toggleCardSelection(index));
            }
            
            return cardEl;
        }

        // –í—ã–±–æ—Ä/—Å–Ω—è—Ç–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Å –∫–∞—Ä—Ç—ã
        function toggleCardSelection(index) {
            if (playerFields.top.length > 0 || playerFields.middle.length > 0 || playerFields.bottom.length > 0) {
                return; // –£–∂–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã, –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å
            }
            
            const idx = selectedCards.indexOf(index);
            if (idx === -1) {
                selectedCards.push(index);
            } else {
                selectedCards.splice(idx, 1);
            }
            
            updateHands();
            updateControls();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å –∫–∞—Ä—Ç–∞–º–∏
        function updateFields() {
            updateField(playerTopEl, playerFields.top);
            updateField(playerMiddleEl, playerFields.middle);
            updateField(playerBottomEl, playerFields.bottom);
            
            updateField(botTopEl, botFields.top);
            updateField(botMiddleEl, botFields.middle);
            updateField(botBottomEl, botFields.bottom);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è
        function updateField(fieldEl, cards) {
            fieldEl.innerHTML = '';
            const title = fieldEl.querySelector('.field-title').cloneNode(true);
            fieldEl.appendChild(title);
            
            cards.forEach((card, index) => {
                const cardEl = createCardElement(card, index, false);
                fieldEl.appendChild(cardEl);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–Ω–æ–ø–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        function updateControls() {
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
            const cardElements = playerHandEl.querySelectorAll('.card');
            cardElements.forEach((el, index) => {
                if (selectedCards.includes(index)) {
                    el.classList.add('selected');
                } else {
                    el.classList.remove('selected');
                }
            });
            
            // –ö–Ω–æ–ø–∫–∞ "–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ä—Ç—ã"
            if (playerFields.top.length === 0 && playerFields.middle.length === 0 && playerFields.bottom.length === 0) {
                arrangeBtn.disabled = false;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤ —Ç–µ–∫—É—â–µ–µ –ø–æ–ª–µ
                if (currentField === 'top' && selectedCards.length === 5) {
                    arrangeBtn.textContent = '–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –≤–µ—Ä—Ö (5 –∫–∞—Ä—Ç)';
                } else if (currentField === 'middle' && selectedCards.length === 5) {
                    arrangeBtn.textContent = '–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ —Å–µ—Ä–µ–¥–∏–Ω—É (5 –∫–∞—Ä—Ç)';
                } else if (currentField === 'bottom' && selectedCards.length === 3) {
                    arrangeBtn.textContent = '–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –Ω–∏–∑ (3 –∫–∞—Ä—Ç—ã)';
                } else {
                    arrangeBtn.textContent = '–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ä—Ç—ã';
                    arrangeBtn.disabled = true;
                }
            } else {
                arrangeBtn.disabled = true;
                arrangeBtn.textContent = '–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ä—Ç—ã';
            }
            
            // –ö–Ω–æ–ø–∫–∞ "–°–¥–µ–ª–∞—Ç—å —Ö–æ–¥"
            playBtn.disabled = !(playerFields.top.length === 5 && playerFields.middle.length === 5 && playerFields.bottom.length === 3);
        }

        // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç –ø–æ –ø–æ–ª—è–º
        function arrangeCards() {
            if (!currentField || selectedCards.length === 0) return;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞—Ä—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø–æ–ª—é
            if ((currentField === 'top' && selectedCards.length !== 5) ||
                (currentField === 'middle' && selectedCards.length !== 5) ||
                (currentField === 'bottom' && selectedCards.length !== 3)) {
                return;
            }
            
            // –ü–µ—Ä–µ–Ω–æ—Å–∏–º –∫–∞—Ä—Ç—ã –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –ø–æ–ª–µ
            const selectedCardsCopy = [...selectedCards].sort((a, b) => b - a); // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
            for (const index of selectedCardsCopy) {
                const card = playerHand.splice(index, 1)[0];
                playerFields[currentField].push(card);
            }
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ä—Ç—ã –≤ –ø–æ–ª–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            sortHand(playerFields[currentField]);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä
            selectedCards = [];
            currentField = null;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateHands();
            updateFields();
            updateControls();
            
            // –°–æ–æ–±—â–µ–Ω–∏–µ
            if (playerFields.top.length === 5 && playerFields.middle.length === 5 && playerFields.bottom.length === 3) {
                messageEl.textContent = '–í—Å–µ –∫–∞—Ä—Ç—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã. –ù–∞–∂–º–∏—Ç–µ "–°–¥–µ–ª–∞—Ç—å —Ö–æ–¥" –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤.';
            } else {
                let nextField = '';
                if (playerFields.top.length === 0) nextField = '–≤–µ—Ä—Ö–Ω–µ–µ (5 –∫–∞—Ä—Ç)';
                else if (playerFields.middle.length === 0) nextField = '—Å—Ä–µ–¥–Ω–µ–µ (5 –∫–∞—Ä—Ç)';
                else if (playerFields.bottom.length === 0) nextField = '–Ω–∏–∂–Ω–µ–µ (3 –∫–∞—Ä—Ç—ã)';
                
                messageEl.textContent = `–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—ã –¥–ª—è ${nextField} –ø–æ–ª—è.`;
            }
        }

        // –í—ã–±–æ—Ä –ø–æ–ª—è –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—Ä—Ç
        function selectField(field) {
            if (playerFields.top.length > 0 && playerFields.middle.length > 0 && playerFields.bottom.length > 0) return;
            
            currentField = field;
            updateControls();
            
            let fieldName = '';
            let cardsNeeded = 0;
            
            if (field === 'top') {
                fieldName = '–≤–µ—Ä—Ö–Ω–µ–µ';
                cardsNeeded = 5;
            } else if (field === 'middle') {
                fieldName = '—Å—Ä–µ–¥–Ω–µ–µ';
                cardsNeeded = 5;
            } else if (field === 'bottom') {
                fieldName = '–Ω–∏–∂–Ω–µ–µ';
                cardsNeeded = 3;
            }
            
            messageEl.textContent = `–í—ã–±—Ä–∞–Ω–æ ${fieldName} –ø–æ–ª–µ. –í—ã–±–µ—Ä–∏—Ç–µ ${cardsNeeded} –∫–∞—Ä—Ç –∏ –Ω–∞–∂–º–∏—Ç–µ "–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ä—Ç—ã".`;
        }

        // –•–æ–¥ –±–æ—Ç–∞ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç
        function botArrangeCards() {
            // –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: —Å–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ä—Ç—ã –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ —Å–∏–ª–µ
            sortHand(botHand);
            
            // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º 3 —Å–∞–º—ã–µ —Å–∏–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤ –Ω–∏–∑
            botFields.bottom = botHand.splice(0, 3);
            
            // –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º 5 —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ —Å–∏–ª–µ –∫–∞—Ä—Ç –≤ —Å–µ—Ä–µ–¥–∏–Ω—É
            botFields.middle = botHand.splice(0, 5);
            
            // –û—Å—Ç–∞–≤—à–∏–µ—Å—è 5 –∫–∞—Ä—Ç –∏–¥—É—Ç –≤ –≤–µ—Ä—Ö
            botFields.top = botHand.splice(0, 5);
            
            updateFields();
        }

        // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ –∑–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é
        function evaluateCombination(cards) {
            // –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è - —Å—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—à–∏–Ω—Å—Ç–≤–æ –∫–∞—Ä—Ç
            let score = 0;
            for (const card of cards) {
                score += ranks.indexOf(card.rank) + 2; // 2=0, 3=1, ..., A=12 => +2 —á—Ç–æ–±—ã 2=2, A=14
            }
            return score;
        }

        // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
        function compareCombinations(playerCards, botCards) {
            const playerScore = evaluateCombination(playerCards);
            const botScore = evaluateCombination(botCards);
            
            if (playerScore > botScore) return 1; // –ò–≥—Ä–æ–∫ –≤—ã–∏–≥—Ä–∞–ª
            if (playerScore < botScore) return -1; // –ë–æ—Ç –≤—ã–∏–≥—Ä–∞–ª
            return 0; // –ù–∏—á—å—è
        }

        // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤ –∑–∞ —Ä–∞—É–Ω–¥
        function calculateScores() {
            let playerPoints = 0;
            let botPoints = 0;
            
            // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –≤–µ—Ä—Ö–Ω–∏–µ –ø–æ–ª—è (5 –∫–∞—Ä—Ç)
            const topResult = compareCombinations(playerFields.top, botFields.top);
            if (topResult === 1) playerPoints++;
            else if (topResult === -1) botPoints++;
            
            // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Å—Ä–µ–¥–Ω–∏–µ –ø–æ–ª—è (5 –∫–∞—Ä—Ç)
            const middleResult = compareCombinations(playerFields.middle, botFields.middle);
            if (middleResult === 1) playerPoints++;
            else if (middleResult === -1) botPoints++;
            
            // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –Ω–∏–∂–Ω–∏–µ –ø–æ–ª—è (3 –∫–∞—Ä—Ç—ã)
            const bottomResult = compareCombinations(playerFields.bottom, botFields.bottom);
            if (bottomResult === 1) playerPoints++;
            else if (bottomResult === -1) botPoints++;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º "—á–∏—Å—Ç—É—é –ø–æ–±–µ–¥—É" (–≤—ã–∏–≥—Ä–∞–ª –≤—Å–µ 3 –ø–æ–ª—è)
            if (playerPoints === 3) playerPoints += 3; // –ë–æ–Ω—É—Å –∑–∞ —á–∏—Å—Ç—É—é –ø–æ–±–µ–¥—É
            if (botPoints === 3) botPoints += 3;
            
            return { playerPoints, botPoints };
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞—É–Ω–¥–∞
        function playRound() {
            // –ë–æ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤–æ–∏ –∫–∞—Ä—Ç—ã
            botArrangeCards();
            
            // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤
            const { playerPoints, botPoints } = calculateScores();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            scores.push({ round: currentRound, player: playerPoints, bot: botPoints });
            updateScoreTable();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            let resultMessage = `–†–∞—É–Ω–¥ ${currentRound} –∑–∞–≤–µ—Ä—à–µ–Ω. `;
            if (playerPoints > botPoints) {
                resultMessage += `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${playerPoints}:${botPoints}!`;
            } else if (playerPoints < botPoints) {
                resultMessage += `–ë–æ—Ç –≤—ã–∏–≥—Ä–∞–ª ${botPoints}:${playerPoints}.`;
            } else {
                resultMessage += `–ù–∏—á—å—è ${playerPoints}:${botPoints}.`;
            }
            
            messageEl.textContent = resultMessage;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            playBtn.disabled = true;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function updateScoreTable() {
            scoreTableEl.innerHTML = '';
            
            for (const score of scores) {
                const row = document.createElement('tr');
                
                const roundCell = document.createElement('td');
                roundCell.textContent = score.round;
                row.appendChild(roundCell);
                
                const playerCell = document.createElement('td');
                playerCell.textContent = score.player;
                row.appendChild(playerCell);
                
                const botCell = document.createElement('td');
                botCell.textContent = score.bot;
                row.appendChild(botCell);
                
                scoreTableEl.appendChild(row);
            }
            
            // –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞
            if (scores.length > 0) {
                const totalRow = document.createElement('tr');
                
                const totalLabelCell = document.createElement('td');
                totalLabelCell.textContent = '–í—Å–µ–≥–æ';
                totalRow.appendChild(totalLabelCell);
                
                const totalPlayer = scores.reduce((sum, score) => sum + score.player, 0);
                const totalPlayerCell = document.createElement('td');
                totalPlayerCell.textContent = totalPlayer;
                totalRow.appendChild(totalPlayerCell);
                
                const totalBot = scores.reduce((sum, score) => sum + score.bot, 0);
                const totalBotCell = document.createElement('td');
                totalBotCell.textContent = totalBot;
                totalRow.appendChild(totalBotCell);
                
                scoreTableEl.appendChild(totalRow);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        newGameBtn.addEventListener('click', newGame);
        arrangeBtn.addEventListener('click', arrangeCards);
        playBtn.addEventListener('click', playRound);
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–µ–π
        playerTopEl.addEventListener('click', () => selectField('top'));
        playerMiddleEl.addEventListener('click', () => selectField('middle'));
        playerBottomEl.addEventListener('click', () => selectField('bottom'));
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateControls();
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–∏—Ç–∞–π—Å–∫–∏–π –ê–Ω–∞–Ω–∞—Å II ‚Äî Optimized Edition</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1a1a1a;
      color: #fff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2, h3 {
      text-align: center;
      margin-top: 20px;
      color: #00ffcc;
    }

    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 1000px;
      width: 100%;
      padding: 20px;
    }

    .player-zone, .bot-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      margin-bottom: 40px;
    }

    .hand, .dropzone {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .card {
      width: 60px;
      height: 90px;
      background: white;
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      color: black;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
      cursor: grab;
      transition: transform 0.2s ease;
    }

    .card:hover {
      transform: scale(1.05);
    }

    .dropzone {
      min-height: 100px;
      background: #2e2e2e;
      border: 2px dashed #00ffcc;
      padding: 10px;
      border-radius: 8px;
      margin-top: 5px;
    }

    .row-label {
      font-size: 16px;
      color: #ccc;
      margin-top: 10px;
    }

    .combo-name, .row-result {
      font-size: 14px;
      color: #aaa;
      margin-top: 2px;
    }

    .score-tag {
      font-size: 16px;
      margin-left: 10px;
      font-weight: bold;
    }

    .win-score {
      color: #00ff88;
    }

    .lose-score {
      color: #ff4d4d;
    }

    button {
      padding: 10px 20px;
      background-color: #00ffcc;
      color: #000;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
      transition: background 0.3s;
    }

    button:hover {
      background-color: #00d6aa;
    }

    .result {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
    }

    .win {
      color: #00ff88;
    }

    .loss {
      color: #ff4d4d;
    }

    .stats {
      margin-top: 10px;
      font-size: 16px;
      color: #aaa;
    }

    .discarded-card {
      opacity: 0.4;
      pointer-events: none;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<div class="game-container">

  <!-- –ë–æ—Ç -->
  <div class="bot-zone">
    <h3>ü§ñ –ë–æ—Ç</h3>

    <div style="display: flex; align-items: center;">
      <div class="row-label">‚¨Ü –í–µ—Ä—Ö (3 –∫–∞—Ä—Ç—ã)</div>
      <span class="score-tag" id="bot-top-score"></span>
    </div>
    <div id="bot-top" class="dropzone"></div>
    <div id="bot-top-combo" class="combo-name"></div>

    <div style="display: flex; align-items: center;">
      <div class="row-label">üü∞ –°—Ä–µ–¥–Ω–∏–π (5 –∫–∞—Ä—Ç)</div>
      <span class="score-tag" id="bot-middle-score"></span>
    </div>
    <div id="bot-middle" class="dropzone"></div>
    <div id="bot-middle-combo" class="combo-name"></div>

    <div style="display: flex; align-items: center;">
      <div class="row-label">‚¨á –ù–∏–∑ (5 –∫–∞—Ä—Ç)</div>
      <span class="score-tag" id="bot-bottom-score"></span>
    </div>
    <div id="bot-bottom" class="dropzone"></div>
    <div id="bot-bottom-combo" class="combo-name"></div>
  </div>

  <!-- –ò–≥—Ä–æ–∫ -->
  <div class="player-zone">
    <h3>üÉè –í–∞—à–∏ –Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
    <div class="hand" id="player-initial-cards"></div>

    <button onclick="startPlayerTurn()">‚úÖ –ì–æ—Ç–æ–≤–æ</button>

    <h3 class="hidden" id="extra-title">‚ûï –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
    <div class="hand hidden" id="player-extra-cards"></div>

    <h3 id="discard-zone-label" class="hidden">ü™´ –°–±—Ä–æ—à–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã</h3>
    <div class="hand hidden" id="discard-zone"></div>

    <p id="discard-info" class="hidden">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è —Å–±—Ä–æ—Å–∞:</p>
    <button id="discard-btn" class="hidden" onclick="discardCard()">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å</button>

    <h3 class="hidden" id="layout-title">üßÆ –í–∞—à–∞ —Ä–∞—Å–∫–ª–∞–¥–∫–∞</h3>
    <div id="layout-section" class="hidden" style="width: 100%;">
      <div style="display: flex; align-items: center;">
        <div class="row-label">‚¨Ü –í–µ—Ä—Ö (3 –∫–∞—Ä—Ç—ã)</div>
        <span class="score-tag" id="top-score"></span>
      </div>
      <div id="top" class="dropzone"></div>
      <div id="top-combo" class="combo-name"></div>

      <div style="display: flex; align-items: center;">
        <div class="row-label">üü∞ –°—Ä–µ–¥–Ω–∏–π —Ä—è–¥ (5 –∫–∞—Ä—Ç)</div>
        <span class="score-tag" id="middle-score"></span>
      </div>
      <div id="middle" class="dropzone"></div>
      <div id="middle-combo" class="combo-name"></div>

      <div style="display: flex; align-items: center;">
        <div class="row-label">‚¨á –ù–∏–∑ (5 –∫–∞—Ä—Ç)</div>
        <span class="score-tag" id="bottom-score"></span>
      </div>
      <div id="bottom" class="dropzone"></div>
      <div id="bottom-combo" class="combo-name"></div>

      <button onclick="finishGame()">üèÅ –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
    </div>

    <p id="foul-error" style="color: red; font-weight: bold;"></p>
    <p id="result" class="result"></p>
    <p id="stats" class="stats"></p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/pokersolver @2.2.0/PokerSolver.min.js"></script>
<script>
const suits = ['‚ô†', '‚ô£', '‚ô¶', '‚ô•'];
const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];

let deck = [];
let playerInitial = [], playerExtra = [], playerFinal = [];
let botInitial = [], botExtra = [], botFinal = [];

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã
function createDeck() {
  let d = [];
  for (let s of suits) {
    for (let r of ranks) {
      d.push(r + s);
    }
  }
  return d;
}

// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ
function shuffle(deck) {
  for (let i = deck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [deck[i], deck[j]] = [deck[j], deck[i]];
  }
  return deck;
}

// –í—ã–±–æ—Ä —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–∞—Ä—Ç
function drawUnique(count) {
  let result = [];
  while (result.length < count && deck.length > 0) {
    let card = deck.splice(Math.floor(Math.random() * deck.length), 1)[0];
    result.push(card);
  }
  return result;
}

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç
function renderCards(containerId, cards) {
  const container = document.getElementById(containerId);
  if (!container) return;

  container.innerHTML = '';
  for (let card of cards) {
    let div = document.createElement('div');
    div.className = 'card';
    div.textContent = card;
    div.draggable = true;

    div.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', card);
    });

    container.appendChild(div);
  }
}

// --- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drop ---
document.querySelectorAll('[data-drop]').forEach(area => {
  area.addEventListener('dragover', e => e.preventDefault());
  area.addEventListener('drop', e => {
    e.preventDefault();
    const cardText = e.dataTransfer.getData('text/plain');

    // –ò—â–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª
    const cardDiv = document.querySelector(`[draggable][data-card='${cardText}']`) || 
                    document.querySelector(`[draggable]:not(.discarded-card):contains('${cardText}')`);

    const targetArea = e.target.closest('.dropzone');
    if (!targetArea) return;

    // –ö–ª–æ–Ω–∏—Ä—É–µ–º –∏ —É–¥–∞–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª
    if (cardDiv && !targetArea.querySelector(`[data-card='${cardText}']`)) {
      const clone = cardDiv.cloneNode(true);
      clone.setAttribute('data-card', cardText);
      clone.draggable = false;
      targetArea.appendChild(clone);
      cardDiv.remove();
    }
  });
});

// --- –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã ---
window.startPlayerTurn = function () {
  playerExtra = drawUnique(3);

  const extraContainer = document.getElementById('player-extra-cards');
  extraContainer.innerHTML = '';
  playerExtra.forEach(card => {
    let div = document.createElement('div');
    div.className = 'card';
    div.textContent = card;
    div.draggable = true;

    div.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', card);
    });

    extraContainer.appendChild(div);
  });

  document.getElementById('extra-title').classList.remove('hidden');
  extraContainer.classList.remove('hidden');
  document.getElementById('discard-zone-label').classList.remove('hidden');
  document.getElementById('discard-zone').classList.remove('hidden');
  document.getElementById('discard-info').classList.remove('hidden');
  document.getElementById('discard-btn').classList.remove('hidden');
  document.getElementById('layout-section').classList.remove('hidden');
};

window.discardCard = function () {
  let extraCards = Array.from(document.getElementById('player-extra-cards').children);
  let discardZone = document.getElementById('discard-zone');

  alert("–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –µ—ë");

  extraCards.forEach(card => {
    card.onclick = () => {
      if (!card.classList.contains('discarded-card')) {
        card.classList.add('discarded-card');
        card.style.opacity = '0.4';
        card.style.pointerEvents = 'none';
        card.draggable = false;

        let clone = card.cloneNode(true);
        clone.setAttribute('data-card', card.textContent);
        discardZone.appendChild(clone);

        card.remove(); // –£–¥–∞–ª—è–µ–º –∏–∑ –¥–æ–ø. –∫–∞—Ä—Ç
      }
    };
  });
};

window.finishGame = function () {
  const topPlayer = getCardsFromZone('top');
  const middlePlayer = getCardsFromZone('middle');
  const bottomPlayer = getCardsFromZone('bottom');

  if (topPlayer.length !== 3 || middlePlayer.length !== 5 || bottomPlayer.length !== 5) {
    alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª–æ–∂–∏—Ç–µ —Ä–æ–≤–Ω–æ:\n- 3 –∫–∞—Ä—Ç—ã –≤ –í–µ—Ä—Ö,\n- 5 –∫–∞—Ä—Ç –≤ –°—Ä–µ–¥–Ω–∏–π,\n- 5 –∫–∞—Ä—Ç –≤ –ù–∏–∑.");
    return;
  }

  const strengthTop = getStrength(topPlayer);
  const strengthMiddle = getStrength(middlePlayer);
  const strengthBottom = getStrength(bottomPlayer);

  if (strengthTop >= strengthMiddle || strengthMiddle >= strengthBottom) {
    document.getElementById("foul-error").textContent = "‚ùå –í—ã —Å–¥–µ–ª–∞–ª–∏ —Ñ–æ–ª! –í–µ—Ä—Ö < –°—Ä–µ–¥–Ω–∏–π < –ù–∏–∑";
  //  return;
  } else {
    document.getElementById("foul-error").textContent = "";
  }

  const botLayout = botPlay();

  const resTop = compare(strengthTop, botLayout.topStrength);
  const resMiddle = compare(strengthMiddle, botLayout.middleStrength);
  const resBottom = compare(strengthBottom, botLayout.bottomStrength);

  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä—è–¥–∞–º
  document.getElementById("top-score").textContent = resTop === 1 ? "+1" : resTop === -1 ? "-1" : "0";
  document.getElementById("top-score").className = resTop === 1 ? "score-tag win-score" : resTop === -1 ? "score-tag lose-score" : "score-tag";

  document.getElementById("middle-score").textContent = resMiddle === 1 ? "+1" : resMiddle === -1 ? "-1" : "0";
  document.getElementById("middle-score").className = resMiddle === 1 ? "score-tag win-score" : resMiddle === -1 ? "score-tag lose-score" : "score-tag";

  document.getElementById("bottom-score").textContent = resBottom === 1 ? "+1" : resBottom === -1 ? "-1" : "0";
  document.getElementById("bottom-score").className = resBottom === 1 ? "score-tag win-score" : resBottom === -1 ? "score-tag lose-score" : "score-tag";

  let scorePlayer = 0, scoreBot = 0;

  if (resTop === 1) scorePlayer++;
  else if (resTop === -1) scoreBot++;

  if (resMiddle === 1) scorePlayer++;
  else if (resMiddle === -1) scoreBot++;

  if (resBottom === 1) scorePlayer++;
  else if (resBottom === -1) scoreBot++;

  let win = scorePlayer > scoreBot;
  if (win) {
    document.getElementById('result').className = 'result win';
    document.getElementById('result').textContent = `üéâ –í—ã –ø–æ–±–µ–¥–∏–ª–∏! ${scorePlayer} : ${scoreBot}`;
  } else {
    document.getElementById('result').className = 'result loss';
    document.getElementById('result').textContent = `üò¢ –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏. ${scorePlayer} : ${scoreBot}`;
  }

  saveStats(win);
};

function getCardsFromZone(zoneId) {
  return Array.from(document.getElementById(zoneId).children)
              .map(c => c.getAttribute('data-card') || c.textContent);
}

function getHandName(cards) {
  try {
    return PokerEvaluator.evaluateHand(prepareCards(cards)).name;
  } catch (e) {
    return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";
  }
}

function getStrength(cards) {
  try {
    return PokerEvaluator.evaluateHand(prepareCards(cards)).value;
  } catch (e) {
    return 0;
  }
}

function prepareCards(cards) {
  return cards.map(c => c.replace('‚ô†', 's').replace('‚ô£', 'c').replace('‚ô¶', 'd').replace('‚ô•', 'h'));
}

function getPokerValue(card) {
  const valueMap = {
    '2': 2, '3': 3, '4': 4, '5': 5,
    '6': 6, '7': 7, '8': 8, '9': 9,
    '10': 10, 'J': 11, 'Q': 12, 'K': 13, 'A': 14
  };
  return valueMap[card.slice(0, card.length - 1)] || 0;
}

function compare(p, b) {
  return p > b ? 1 : p < b ? -1 : 0;
}

function loadStats() {
  let stats = JSON.parse(localStorage.getItem("chinese_poker_stats") || '{"wins":0,"losses":0}');
  document.getElementById("stats").textContent = `–ü–æ–±–µ–¥: ${stats.wins} | –ü–æ—Ä–∞–∂–µ–Ω–∏–π: ${stats.losses}`;
}

function saveStats(win) {
  let stats = JSON.parse(localStorage.getItem("chinese_poker_stats") || '{"wins":0,"losses":0}');
  if (win) stats.wins++;
  else stats.losses++;
  localStorage.setItem("chinese_poker_stats", JSON.stringify(stats));
  loadStats();
}

// –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞
function botPlay() {
  botExtra = drawUnique(3);
  let discardIndex = Math.floor(Math.random() * botExtra.length);
  botExtra.splice(discardIndex, 1); // –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ–¥–Ω—É –∫–∞—Ä—Ç—É

  let botAll = [...botInitial, ...botExtra];
  botAll.sort((a, b) => getPokerValue(b) - getPokerValue(a));

  let top = botAll.slice(0, 3);
  let middle = botAll.slice(3, 8);
  let bottom = botAll.slice(8, 13);

  renderCards('bot-top', top);
  renderCards('bot-middle', middle);
  renderCards('bot-bottom', bottom);

  document.getElementById("bot-top-combo").textContent = getHandName(top);
  document.getElementById("bot-middle-combo").textContent = getHandName(middle);
  document.getElementById("bot-bottom-combo").textContent = getHandName(bottom);

  return {
    topStrength: getStrength(top),
    middleStrength: getStrength(middle),
    bottomStrength: getStrength(bottom),
    topCombo: getHandName(top),
    middleCombo: getHandName(middle),
    bottomCombo: getHandName(bottom)
  };
}

// --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã ---
function resetGame() {
  deck = shuffle(createDeck());

  playerInitial = drawUnique(5);
  botInitial = drawUnique(5);

  clearElement('player-initial-cards');
  clearElement('bot-initial-cards');
  clearElement('player-extra-cards');
  clearElement('discard-zone');
  clearElement('top');
  clearElement('middle');
  clearElement('bottom');
  clearElement('bot-top');
  clearElement('bot-middle');
  clearElement('bot-bottom');

  document.getElementById('extra-title')?.classList.add('hidden');
  document.getElementById('discard-zone-label')?.classList.add('hidden');
  document.getElementById('discard-info')?.classList.add('hidden');
  document.getElementById('discard-btn')?.classList.add('hidden');
  document.getElementById('layout-section')?.classList.add('hidden');

  renderCards('player-initial-cards', playerInitial);
  renderCards('bot-initial-cards', botInitial);
}

function clearElement(id) {
  const el = document.getElementById(id);
  if (el) el.innerHTML = '';
}

function initDropZones() {
  document.querySelectorAll('.dropzone').forEach(area => {
    area.addEventListener('dragover', e => e.preventDefault());
    area.addEventListener('drop', handleDrop);
  });
}

function handleDrop(e) {
  e.preventDefault();
  const cardText = e.dataTransfer.getData('text/plain');
  const cardDiv = document.querySelector(`.card:not(.discarded-card):not([data-card])`);
  const target = e.currentTarget;

  if (cardDiv && !target.querySelector(`[data-card='${cardText}']`)) {
    const clone = cardDiv.cloneNode(true);
    clone.setAttribute('data-card', cardText);
    clone.draggable = false;
    target.appendChild(clone);
    cardDiv.remove();
  }
}

// –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
document.addEventListener("DOMContentLoaded", function () {
  loadStats();
  resetGame();
  initDropZones();
});
</script>

<!-- –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
<p id="stats" class="stats"></p>

</body>
</html>
